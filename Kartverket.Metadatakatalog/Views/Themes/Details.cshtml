@model Kartverket.Metadatakatalog.Models.Theme
@using Kartverket.Metadatakatalog.Helpers

@{
    ViewBag.Title = "Tema - " + Model.Name;
}

@section breadcrumb {
    <li><a href="@Url.Action("Index", "Themes")">Temaer</a></li>
    <li class="active">@Model.Name</li>
}

<section class="heading">
    <div class="row">
        <div class="col-sm-12">
            <h1>@Model.Name</h1>
            <span class="label label-default">Tema</span>
        </div>
        <div class="col-sm-12">
            <span class="separator-lg"></span>
        </div>
    </div>
</section>

@* Hierarki *@
<div>
    @foreach (var parent in HtmlHelperExtensions.Parents(Model))
    {
        <a href="@Url.Action("Details", "Themes", new { id = @parent.Id, ThemeSeoName = HtmlHelperExtensions.SeoFriendlyString(parent.Name) })"><span class="label label-default">@parent.Name</span></a>
    }
    <span class="label label-default">@Model.Name</span>
</div>

@* Beskrivelse og thumbnail*@
<div class="row">

    @* *** Beskrivelse tekst *** *@
    <div>
        <div class="col-md-8  size-12 col-sm-12 ">
                <p>@Model.Description</p>
        </div>
    </div>

    @* *** Beskrivelse bilde *** *@
    <aside class="col-sm-4  size-12 col-sm-12 ">
        <div class="block listblock">
            @if (!string.IsNullOrWhiteSpace(Model.ThumbnailUrl))
            {
                <img src="@Model.ThumbnailUrl" class="pull-right" alt="Forhåndsvisning av data." />
            }
        </div>
    </aside>
</div>

@* Metadata*@
<div>
    @if (Model.Metadata.Any())
    {
        <h3>Datasett</h3>
        foreach (var metadata in Model.Metadata)
        {
            <p><a id="href-uuid-@metadata.Uuid" href="/metadata/uuid/@metadata.Uuid"></a></p>
                            <script>
                                $.getJSON(`/api/search?text=@metadata.Uuid`,
                                    function (result) {
                                        if (result.length != 0) {
                                            if (result.Results[0] != null) {
                                                const title = result.Results[0].Title;
                                                $(`#href-uuid-@metadata.Uuid`).text(title);
                                            }
                                        }
                                    });
                            </script>
        }
    }
</div>

<a href="@Url.Action("Edit", "Themes", new { id = Model.Id })" class="btn btn-default pull-right">Rediger</a>

