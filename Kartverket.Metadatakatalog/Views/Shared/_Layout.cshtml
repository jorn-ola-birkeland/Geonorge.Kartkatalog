﻿@using Kartverket.Metadatakatalog.Helpers
<!DOCTYPE html>
<html class=" js flexbox no-flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg no-smil svgclippaths">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="geonorge-version" content="@Html.ApplicationVersionNumber()" />

    @if (ViewBag.MetaDescription != null)
    {
        <meta name="description" content="@ViewBag.MetaDescription" />
    }
    <link rel="shortcut icon" type="image/x-icon" href="/Content/img/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" href="/Content/img/logo-graphic-512.png" />

    <title>
        @ViewBag.Title
        @if (ViewBag.Title != null)
        {
            <text> - </text>
        }
        @Resources.UI.AppPageTitle
    </title>
    @Styles.Render("~/bundles/shared-menu-styles")

    @Styles.Render("~/Content/css")
    @Styles.Render("~/Content/download");

    @RenderSection("head", false)

    @Html.Partial("_Analytics")
    <script type="text/javascript" src="/Scripts/easyXDM.js"></script>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/js")
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/shared-menu-scripts")
    <script>
        // by Kartverket/Thomas Hirsch 2012 / public domain.
        //var hash = 'http://norgeskart.no/geoportal/testing/dynamisk.html';
        //var hash = 'http://norgeskart.no/geoportal/staging';

        //var socket = new easyXDM.Socket({
        //    remote: hash,
        //    onMessage: function (message, origin) {
        //        var reslist2 = document.getElementById('result');
        //        reslist2.innerHTML = reslist2.innerHTML + message;
        //        var json = easyXDM.getJSONObject().parse(message);

        //        if (json) {
        //            if (json.type === 'layerLoaded') {
        //                var reslist = document.getElementById('layerlist');
        //                var layeritem = '<li  class="list-group-item">';
        //                layeritem = layeritem + '<input type="checkbox" /> <a onclick="javascript:msgShowLayer(\'' + json.parent + '\')" class="btn btn-xs btn-bunnmarg btn-default">';
        //                layeritem = layeritem + '<span class="glyphicon glyphicon-plus"></span> ' + json.title;
        //                layeritem = layeritem + '</a>';
        //                layeritem = layeritem + '</li>';


        //                reslist.innerHTML = layeritem + reslist.innerHTML;
        //            }
        //        }


        //    },
        //    container: document.getElementById("container"),
        //    onReady: function () {
        //        this.container.getElementsByTagName("iframe")[0].style.height = "700px";
        //        this.container.getElementsByTagName("iframe")[0].style.width = "100%";
        //    }
        //});

        function postMessage(msg) {
            var message = JSON.stringify(msg);
            socket.postMessage(message);
            var reslist = document.getElementById('command');
            reslist.innerHTML = message + '</br>' + reslist.innerHTML;
        }
        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            //e.target // newly activated tab
            //e.relatedTarget // previous active tab
            $("#navTabCont").toggleClass("bottom-edge-kart");
            $("#navTabCont").toggleClass("bottom-edge-kartkatalogen");
        })



        function msgAddMapLayer(layer) {
            $('#navTab a:last').tab('show')


            postMessage({ "cmd": "addDataSource", "type": "wms", "url": layer });
        }

        function msgShowLayer(id) {
            postMessage({ "cmd": "setVisible", "id": id });
        }


    </script>
    @RenderSection("scripts", false)
</head>
<body class="geonorge-container prototype  geonorge ng-scope" ng-app="geonorge">
    @Html.Partial("_SharedMenu")

    <div class="container container-breadcrumbs" id="navTabCont">
        <ul class="breadcrumbs col-md-12">
            <li><a href="@Html.GeonorgeUrl()">Geonorge</a></li>
            <li><a href="/">Kartkatalogen</a></li>
            @RenderSection("breadcrumb", false)
        </ul>
        @* <ul class="nav nav-tabs navbar-right" role="tablist" id="navTab">
                        <li role="presentation" class="background-kartkatalogen active"><a class="background-kartkatalogen" href="#kartkatalog" aria-controls="kartkatalog" role="tab" data-toggle="tab">Kartkatalogen</a></li>
                   <li role="presentation" class="background-kart"><a href="#kart" aria-controls="kart" role="tab" data-toggle="tab">Kartsøk</a></li>

            </ul>*@
    </div>

    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="kartkatalog">
            <div class="body-content">
                <div class="container">
                    <!--
                        <div id="loading">
                            <img id="loading-image" src="/Content/img/loader.gif" alt="Laster..." />
                        </div>
                    -->
                    @RenderBody()
                </div>

            </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="kart">

            @*@Html.Partial("_Map")*@


        </div>

    </div>


    <footer class="page-footer" role="contentinfo">
        <div class="container-footer">
            <div>
                <div class="block editorialblock col-md-12 col-lg-4  ">
                    <div class="">
                        <p><img alt="" src="~/Content/img/geonorge.png" height="87" width="381"></p>
                        <ul class="editorialblock-list-item"></ul>
                    </div>
                </div><div class="block editorialblock col-md-12 col-lg-4  ">
                    <div class="">
                        <h2>Om nettstedet:</h2>

                        <ul class="editorialblock-list-item">
                            <li>
                                <a href="/informasjon/om-geonorge/">Om Geonorge</a>
                            </li>
                            <li>
                                <a href="/informasjon/">Informasjon</a>
                            </li>
                        </ul>
                    </div>
                </div><div class="block editorialblock col-md-12 col-lg-4  ">
                    <div class="">
                        <h2>Kontakt</h2>
                        <p><span style="font-family: 'Open Sans', sans-serif; font-size: 22px;">Telefon: 08700<br></span>Fra utlandet: +47 32 11 81 21<br><a title="post@geonorge.no" href="mailto:post@geonorge.no">post@geonorge.no</a><br>Org. nr.: 971 040 238</p>
                        <hr>
                        <p>En løsning fra</p>
                        <p><img alt="" src="~/Content/img/kartverket.png" height="75" width="195"></p>
                        <ul class="editorialblock-list-item"></ul>
                    </div>
                </div>
            </div>
            <div class="text-center">
                <small>Versjon @Html.ApplicationVersionNumber()</small>
            </div>
        </div>
    </footer>




    <script src="~/Scripts/site.js"></script>
</body>

</html>
